{
    "$defs": {
        "audioClip": {
            "additionalProperties": false,
            "properties": {
                "control": {
                    "$ref": "#/$defs/busControl"
                },
                "name": {
                    "title": "Clip Name",
                    "type": "string"
                },
                "path": {
                    "title": "Audio File Path",
                    "type": "string"
                },
                "time": {
                    "$ref": "#/$defs/clipTime"
                },
                "type": {
                    "const": "audio",
                    "title": "Clip Type",
                    "type": "string"
                },
                "workspace": {
                    "$ref": "#/$defs/workspace"
                }
            },
            "required": [
                "control",
                "name",
                "path",
                "time",
                "type",
                "workspace"
            ],
            "title": "Audio Clip",
            "type": "object"
        },
        "busControl": {
            "additionalProperties": false,
            "properties": {
                "gain": {
                    "title": "Gain",
                    "type": "number"
                },
                "mute": {
                    "title": "Mute",
                    "type": "boolean"
                },
                "pan": {
                    "maximum": 1,
                    "minimum": -1,
                    "title": "Pan",
                    "type": "number"
                }
            },
            "required": [
                "gain",
                "mute",
                "pan"
            ],
            "title": "Bus Control",
            "type": "object"
        },
        "centShift": {
            "maximum": 50,
            "minimum": -50,
            "title": "Cent Shift",
            "type": "integer"
        },
        "clip": {
            "oneOf": [
                {
                    "$ref": "#/$defs/audioClip"
                },
                {
                    "$ref": "#/$defs/singingClip"
                }
            ],
            "title": "Clip"
        },
        "clipTime": {
            "additionalProperties": false,
            "properties": {
                "clipLen": {
                    "description": "The clipped length relative to `clipStart`",
                    "minimum": 0,
                    "maximum": 2147483647,
                    "title": "Clipped Length (Ticks)",
                    "type": "integer"
                },
                "clipStart": {
                    "description": "The clipped length relative to `start`",
                    "minimum": 0,
                    "maximum": 2147483647,
                    "title": "Clipped Start (Ticks)",
                    "type": "integer"
                },
                "length": {
                    "description": "The actual length of the content in the clip",
                    "minimum": 0,
                    "maximum": 2147483647,
                    "title": "Length (Ticks)",
                    "type": "integer"
                },
                "start": {
                    "description": "The start position of the content in the clip in the timeline",
                    "minimum": -2147483648,
                    "maximum": 2147483647,
                    "title": "Start Position (Ticks)",
                    "type": "integer"
                }
            },
            "required": [
                "clipLen",
                "clipStart",
                "length",
                "start"
            ],
            "title": "Clip Time",
            "type": "object"
        },
        "label": {
            "additionalProperties": false,
            "properties": {
                "pos": {
                    "minimum": 0,
                    "maximum": 2147483647,
                    "title": "Position (Ticks)",
                    "type": "integer"
                },
                "text": {
                    "title": "Text",
                    "type": "string"
                }
            },
            "required": [
                "pos",
                "text"
            ],
            "title": "Label",
            "type": "object"
        },
        "controlPoints": {
            "items": {
                "additionalProperties": false,
                "properties": {
                    "x": {
                        "title": "X Position (Note Length Ratio)",
                        "type": "number"
                    },
                    "y": {
                        "title": "Y Position (Ratio)",
                        "type": "number"
                    }
                },
                "required": [
                    "x",
                    "y"
                ],
                "title": "Control Point",
                "type": "object"
            },
            "title": "Control Points",
            "type": "array"
        },
        "note": {
            "additionalProperties": false,
            "properties": {
                "centShift": {
                    "$ref": "#/$defs/centShift"
                },
                "keyNum": {
                    "maximum": 127,
                    "minimum": 0,
                    "title": "MIDI Key Number",
                    "type": "integer"
                },
                "language": {
                    "title": "Language (ISO 639-3 Code)",
                    "type": "string"
                },
                "length": {
                    "minimum": 0,
                    "maximum": 2147483647,
                    "title": "Length (Ticks)",
                    "type": "integer"
                },
                "lyric": {
                    "title": "Lyric",
                    "type": "string"
                },
                "phonemes": {
                    "additionalProperties": false,
                    "properties": {
                        "edited": {
                            "items": {
                                "$ref": "#/$defs/phoneme"
                            },
                            "title": "Edited Phonemes",
                            "type": "array"
                        },
                        "original": {
                            "items": {
                                "$ref": "#/$defs/phoneme"
                            },
                            "title": "Original Phonemes Generated from Pronunciation",
                            "type": "array"
                        }
                    },
                    "required": [
                        "edited",
                        "original"
                    ],
                    "title": "Phonemes",
                    "type": "object"
                },
                "pos": {
                    "minimum": 0,
                    "maximum": 2147483647,
                    "title": "Position (Ticks)",
                    "type": "integer"
                },
                "pronunciation": {
                    "additionalProperties": false,
                    "properties": {
                        "edited": {
                            "title": "Edited Pronunciation",
                            "type": "string"
                        },
                        "original": {
                            "title": "Original Pronunciation Generated by G2P",
                            "type": "string"
                        }
                    },
                    "required": [
                        "edited",
                        "original"
                    ],
                    "title": "Pronunciation",
                    "type": "object"
                },
                "vibrato": {
                    "additionalProperties": false,
                    "properties": {
                        "amp": {
                            "minimum": 0,
                            "maximum": 2147483647,
                            "title": "Amplitude (Cent)",
                            "type": "integer"
                        },
                        "end": {
                            "maximum": 1,
                            "minimum": 0,
                            "title": "End (Note Length Ratio)",
                            "type": "number"
                        },
                        "freq": {
                            "minimum": 0,
                            "title": "Frequency (Hz)",
                            "type": "number"
                        },
                        "offset": {
                            "title": "Offset of Tune (Cent)",
                            "maximum": 2147483647,
                            "minimum": -2147483648,
                            "type": "integer"
                        },
                        "phase": {
                            "maximum": 1,
                            "minimum": 0,
                            "title": "Phase",
                            "type": "number"
                        },
                        "points": {
                            "additionalProperties": false,
                            "properties": {
                                "amp": {
                                    "$ref": "#/$defs/controlPoints"
                                },
                                "freq": {
                                    "$ref": "#/$defs/controlPoints"
                                }
                            },
                            "required": [
                                "amp",
                                "freq"
                            ],
                            "type": "object"
                        },
                        "start": {
                            "maximum": 1,
                            "minimum": 0,
                            "title": "Start (Note Length Ratio)",
                            "type": "number"
                        }
                    },
                    "required": [
                        "amp",
                        "end",
                        "freq",
                        "offset",
                        "phase",
                        "points",
                        "start"
                    ],
                    "title": "Vibrato",
                    "type": "object"
                },
                "workspace": {
                    "$ref": "#/$defs/workspace"
                }
            },
            "required": [
                "centShift",
                "keyNum",
                "language",
                "length",
                "lyric",
                "phonemes",
                "pos",
                "pronunciation",
                "vibrato",
                "workspace"
            ],
            "title": "Note",
            "type": "object"
        },
        "param": {
            "additionalProperties": false,
            "properties": {
                "edited": {
                    "$ref": "#/$defs/paramCurveList",
                    "title": "Edited Parameter Curves"
                },
                "transform": {
                    "$ref": "#/$defs/paramCurveList",
                    "title": "Transform Parameter Curves"
                },
                "original": {
                    "$ref": "#/$defs/paramCurveList",
                    "title": "Original Parameter Curves"
                }
            },
            "required": [
                "edited",
                "transform",
                "original"
            ],
            "title": "Parameter",
            "type": "object"
        },
        "paramCurve": {
            "oneOf": [
                {
                    "$ref": "#/$defs/paramCurveAnchor"
                },
                {
                    "$ref": "#/$defs/paramCurveFree"
                }
            ],
            "title": "Parameter Curve"
        },
        "paramCurveAnchor": {
            "additionalProperties": false,
            "properties": {
                "nodes": {
                    "items": {
                        "additionalProperties": false,
                        "properties": {
                            "interp": {
                                "enum": [
                                    "none",
                                    "linear",
                                    "hermite"
                                ],
                                "title": "Interpolation Type",
                                "type": "string"
                            },
                            "x": {
                                "minimum": 0,
                                "maximum": 2147483647,
                                "title": "X Position (Ticks)",
                                "type": "integer"
                            },
                            "y": {
                                "title": "Y Position (Parameter Value)",
                                "minimum": -2147483648,
                                "maximum": 2147483647,
                                "type": "integer"
                            }
                        },
                        "required": [
                            "interp",
                            "x",
                            "y"
                        ],
                        "title": "Anchor Node",
                        "type": "object"
                    },
                    "title": "Anchor Node List",
                    "type": "array"
                },
                "start": {
                    "minimum": -2147483648,
                    "maximum": 2147483647,
                    "title": "Start Position (Ticks)",
                    "type": "integer"
                },
                "type": {
                    "const": "anchor",
                    "title": "Curve Type",
                    "type": "string"
                }
            },
            "required": [
                "nodes",
                "start",
                "type"
            ],
            "title": "Anchor Parameter Curve",
            "type": "object"
        },
        "paramCurveFree": {
            "additionalProperties": false,
            "properties": {
                "start": {
                    "minimum": -2147483648,
                    "maximum": 2147483647,
                    "title": "Start Position (Ticks)",
                    "type": "integer"
                },
                "step": {
                    "const": 5,
                    "title": "Step (Ticks)",
                    "type": "integer"
                },
                "type": {
                    "const": "free",
                    "title": "Curve Type",
                    "type": "string"
                },
                "values": {
                    "items": {
                        "title": "Parameter Value",
                        "type": "integer",
                        "minimum": -2147483648,
                        "maximum": 2147483647
                    },
                    "title": "Value List",
                    "type": "array"
                }
            },
            "required": [
                "start",
                "step",
                "type",
                "values"
            ],
            "title": "Free Parameter Curve",
            "type": "object"
        },
        "paramCurveList": {
            "items": {
                "$ref": "#/$defs/paramCurve"
            },
            "title": "Parameter Curve List",
            "type": "array"
        },
        "phoneme": {
            "additionalProperties": false,
            "properties": {
                "language": {
                    "title": "Language (ISO 639-3 Code)",
                    "type": "string"
                },
                "start": {
                    "title": "Start Position (Milliseconds from Note On)",
                    "type": "integer",
                    "minimum": -2147483648,
                    "maximum": 2147483647
                },
                "token": {
                    "title": "Phoneme Token",
                    "type": "string"
                },
                "onset": {
                    "title": "Onset Flag",
                    "type": "boolean"
                }
            },
            "required": [
                "language",
                "start",
                "token",
                "onset"
            ],
            "title": "Phoneme",
            "type": "object"
        },
        "singingClip": {
            "additionalProperties": false,
            "properties": {
                "control": {
                    "$ref": "#/$defs/busControl"
                },
                "name": {
                    "title": "Clip Name",
                    "type": "string"
                },
                "notes": {
                    "items": {
                        "$ref": "#/$defs/note"
                    },
                    "title": "Notes",
                    "type": "array"
                },
                "params": {
                    "additionalProperties": {
                        "$ref": "#/$defs/param"
                    },
                    "title": "Parameters",
                    "type": "object"
                },
                "sources": {
                    "additionalProperties": {
                        "title": "Source",
                        "type": "object"
                    },
                    "title": "Sources",
                    "type": "object"
                },
                "time": {
                    "$ref": "#/$defs/clipTime"
                },
                "type": {
                    "const": "singing",
                    "title": "Clip Type",
                    "type": "string"
                },
                "workspace": {
                    "$ref": "#/$defs/workspace"
                }
            },
            "required": [
                "control",
                "name",
                "notes",
                "params",
                "sources",
                "time",
                "type",
                "workspace"
            ],
            "title": "Singing Clip",
            "type": "object"
        },
        "tempo": {
            "additionalProperties": false,
            "properties": {
                "pos": {
                    "minimum": 0,
                    "maximum": 2147483647,
                    "title": "Position (Ticks)",
                    "type": "integer"
                },
                "value": {
                    "description": "Quarter notes per minute",
                    "maximum": 1000,
                    "minimum": 10,
                    "title": "Tempo Value",
                    "type": "number"
                }
            },
            "required": [
                "pos",
                "value"
            ],
            "title": "Tempo",
            "type": "object"
        },
        "timeSignature": {
            "additionalProperties": false,
            "properties": {
                "denominator": {
                    "enum": [
                        1,
                        2,
                        4,
                        8,
                        16,
                        32,
                        64,
                        128
                    ],
                    "title": "Denominator",
                    "type": "integer"
                },
                "index": {
                    "minimum": 0,
                    "maximum": 2147483647,
                    "title": "Measure number (0-based)",
                    "type": "integer"
                },
                "numerator": {
                    "minimum": 1,
                    "maximum": 2147483647,
                    "title": "Numerator",
                    "type": "integer"
                }
            },
            "required": [
                "denominator",
                "index",
                "numerator"
            ],
            "title": "Time Signature",
            "type": "object"
        },
        "track": {
            "additionalProperties": false,
            "properties": {
                "clips": {
                    "items": {
                        "$ref": "#/$defs/clip"
                    },
                    "title": "Clips",
                    "type": "array"
                },
                "control": {
                    "$ref": "#/$defs/trackControl"
                },
                "name": {
                    "title": "Track Name",
                    "type": "string"
                },
                "workspace": {
                    "$ref": "#/$defs/workspace"
                }
            },
            "required": [
                "clips",
                "control",
                "name",
                "workspace"
            ],
            "title": "Track",
            "type": "object"
        },
        "trackControl": {
            "additionalProperties": false,
            "properties": {
                "gain": {
                    "title": "Gain",
                    "type": "number"
                },
                "mute": {
                    "title": "Mute",
                    "type": "boolean"
                },
                "pan": {
                    "maximum": 1,
                    "minimum": -1,
                    "title": "Pan",
                    "type": "number"
                },
                "solo": {
                    "title": "Solo",
                    "type": "boolean"
                }
            },
            "required": [
                "gain",
                "mute",
                "pan",
                "solo"
            ],
            "title": "Track Control",
            "type": "object"
        },
        "workspace": {
            "additionalProperties": {
                "title": "Workspace Item",
                "type": "object"
            },
            "description": "A flexible object for storing application-specific data.",
            "title": "Workspace",
            "type": "object"
        }
    },
    "$id": "https://dspx.diffscope.org/schema/1.0.0/dspx.schema.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "additionalProperties": false,
    "properties": {
        "content": {
            "additionalProperties": false,
            "properties": {
                "global": {
                    "additionalProperties": false,
                    "description": "Global metadata for the project",
                    "properties": {
                        "author": {
                            "title": "Project Author",
                            "type": "string"
                        },
                        "centShift": {
                            "$ref": "#/$defs/centShift"
                        },
                        "editorId": {
                            "title": "Editor Identifier",
                            "type": "string"
                        },
                        "editorName": {
                            "title": "Editor Name",
                            "type": "string"
                        },
                        "name": {
                            "title": "Project Name",
                            "type": "string"
                        }
                    },
                    "required": [
                        "author",
                        "centShift",
                        "editorId",
                        "editorName",
                        "name"
                    ],
                    "title": "Global",
                    "type": "object"
                },
                "master": {
                    "additionalProperties": false,
                    "properties": {
                        "control": {
                            "$ref": "#/$defs/busControl"
                        }
                    },
                    "required": [
                        "control"
                    ],
                    "title": "Master",
                    "type": "object"
                },
                "timeline": {
                    "additionalProperties": false,
                    "properties": {
                        "labels": {
                            "items": {
                                "$ref": "#/$defs/label"
                            },
                            "title": "Labels",
                            "type": "array"
                        },
                        "tempos": {
                            "items": {
                                "$ref": "#/$defs/tempo"
                            },
                            "title": "Tempos",
                            "type": "array"
                        },
                        "timeSignatures": {
                            "items": {
                                "$ref": "#/$defs/timeSignature"
                            },
                            "title": "Time Signatures",
                            "type": "array"
                        }
                    },
                    "required": [
                        "labels",
                        "tempos",
                        "timeSignatures"
                    ],
                    "title": "Timeline",
                    "type": "object"
                },
                "tracks": {
                    "items": {
                        "$ref": "#/$defs/track"
                    },
                    "title": "Tracks",
                    "type": "array"
                },
                "workspace": {
                    "$ref": "#/$defs/workspace"
                }
            },
            "required": [
                "global",
                "master",
                "timeline",
                "tracks",
                "workspace"
            ],
            "title": "Content",
            "type": "object"
        },
        "version": {
            "const": "1.0.0",
            "title": "Version",
            "type": "string"
        }
    },
    "required": [
        "content",
        "version"
    ],
    "title": "DiffScope Project Exchange Format",
    "type": "object"
}